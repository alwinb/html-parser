(()=>{var V=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports);var de=V((Xn,Ue)=>{var Gt=console.log.bind(console),Je=15,xe=~Je,j=1<<1,M=1<<2,be=1<<3,Ke=1<<4,Xt={Start:j,End:M,Space:be,Warn:Ke},$=1<<23,ve=1<<24,Fe=1<<25,W=1<<26,ye=1<<27,K=1<<28,se=1<<29,D=1<<30,G=1<<17|$|se|D,Ae=1<<18|$|se|D,Q=1<<19|$|se,Ye=1<<20|$,X=1<<5|$,L=1<<6|$|ye,Y=1<<7|K,z=1<<8|K,ae=1<<9|K|ve,re=1<<10|K|Fe,Ze=1<<11|K|ve|Fe,ie=1<<12|D,N=1<<13|D|ye,Z=1<<14|W|D,et=1<<15|W|D,ce=1<<16|W|D,tt=1<<21,ee=1<<22|ye,Pe={Data:G,RcData:Ae,RawText:Q,PlainText:Ye,Value:N,Comment:X,Bogus:L,NamedRef:Z,NumRef:et,HexRef:ce,MDecl:ee,BeforeAtt:ae,AttName:re,AfterAttName:Ze,BeforeValue:ie,Assign:tt,StartTag:Y,EndTag:z},nt={};for(let e in Pe)nt[Pe[e]&xe]=e;var ot=e=>{let t=nt[e&xe];return Gt(e,t),t&&(t+=e&j?"Start":e&M?"End":e&be?"Space":"",t+=e&Ke?" Warn":""),t||null},Ht={style:Q,script:Q,xmp:Q,iframe:Q,noembed:Q,noframes:Q,textarea:Ae,title:Ae,plaintext:Ye},Ie=e=>9<=e&&e<=13&&e!==11||e===32,Vt=e=>48<=e&&e<=57,ke=e=>(e<=90&&(e+=32),97<=e&&e<=122),$t=e=>(e<=90&&(e+=32),97<=e&&e<=102),[Be,ue,Wt,Qt,zt,fe,Ut,je,qe,we,Jt,lt,Kt,Yt,st,Zt]=`</="'-?!>&;#Xx\r
`.split("").map(e=>e.charCodeAt(0));function en(e){let t=String.fromCharCode,{line:a,col:s,last:y,quote:f,tagname:T,tagname_:A}=e,k={line:a,col:s,last:t(e.last),quote:e.quote?t(e.quote):null,tagname:T,tagname_:A};for(let S in e)!(S in k)&&k[S]&&(k[S]=ot(e[S]));return k}function at(){let e,t,a,s,y,f,T,A,k,S,x,v,_,u,c,i,d,w=this;return Object.assign(this,{reset:p,write:E,end:h,batchRead:Re,read:P,_unwrite:J}),Object.defineProperty(this,"state",{get:R=>{let I=i-u;return{line:_,col:I,st:e,sub:t,content:a,tag:s,refIn:y,last:f,quote:T,tagname:A,tagname_:k,label0:d}}}),p();function p(){return e=a=G,t=s=y=null,f=T=0,A=k=x="",S=!0,v=[],c="",d=G,i=u=0,_=1,w}function E(R){return S&&R.length&&(v[v.length]=R),w}function h(R=""){return S=!1,R?E(R):w}function*P(){for(let R of Re(1))yield*R}function J(){let R=v;return R.unshift(c.substr(i)),[x,c,v]=["","",[]],R}function*Re(R=4){let I=[];for(;v.length;){i=0,c=x?x+v.shift():v.shift();for(let q=x.length,We=c.length;q<We;q++){let B=d,b=e,Qe=_,ze=u,m=c.charCodeAt(q);do{if((m===st||m===Zt&&f!==st)&&(Qe++,ze=q+1),e&D&&f===we){if(ke(m)){[y,b,e]=[e,Z,Z];continue}if(m===lt){[y,b,t]=[e,null,et];continue}}if(t&W&&f===lt&&(m===Kt||m===Yt)){[b,t]=[null,ce];continue}if((t||e)&W&&Vt(m)){e=t||e,[b,e,t]=[e,e,null];continue}if((t||e)===ce&&$t(m)){[b,e,t]=[ce,ce,null];continue}if(e===Z&&ke(m)){[b,e,t]=[Z,Z,null];continue}if(e&W&&m===Jt){[b,e,t,y]=[e,y,null,null];continue}if((t||e)&W&&([e,t,y]=[y,null,null]),T&&(e===N||y===N)){[B,b,e,t,T]=m===T?[e,N|M,ae,null,0]:[e,m===we?null:e,N,null,T];continue}if(m===Be&&e&se){[B,b]=[a,null];continue}if(m===ue&&f===Be&&e&se){[b,e]=[null,ee];continue}if(e===G&&f===Be){if(m===je||m===ue){[b,e]=[null,ee];continue}if(m===Ut){[b,e]=[L|j,L];continue}if(ke(m)){[b,e,s,k]=[null,Y,Y,c[q]];continue}}if(s&&m===qe){s===z&&a!==G&&A!==k?[b,e,s]=[a,a,null]:([A,a]=s===Y?[k,Ht[k]||G]:["",G],[B,b,e,s]=[e===Y||e===z?s|j:e,s|M,a,null]);continue}if(e&ye&&m===qe){[B,b,e,t]=[L|(e===ee?j:0),L|M,a,null];continue}if(e===X&&m===qe){[b,e,t]=t===M||t===j&&f===fe?[X|M,G,null]:[e,e,null];continue}if(e===ee){if(f===ue&&ke(m)){[b,e,s,k]=[null,z,z,c[q]];continue}if(Ie(m)){[B,b,e]=[L|j,X|be,L];continue}if(m===fe){[B,b,e,t]=f===fe?[X|j,X|j,X,j]:[null,null,ee,null];continue}else[d,b,e]=[L|j,L,L];continue}if(e===Y||e===z){m===ue||Ie(m)?[B,b,e,s]=s===z&&a!==G&&A!==k?[a,a,a,null]:[s|j,null,ae,s]:[b,k]=[null,k+c[q]];continue}if(Ie(m)){[B,b,e]=e&$?[e,e|be,e]:e===N&&!T?[N,null,ae]:e===re?[re,null,Ze]:[e,e,e];continue}if(b=e,e===X&&(m===je?[b,t]=[t!==M?X:null,t===M&&f!==je?t:null]:m===fe?[b,t]=[null,t===M||f===fe?M:t]:t=null),e===ie){let Dt;[B,b,e,T]=m===Qt||m===zt?[ie,N|j,N,m]:[ie,m===we?null:N,N,0];continue}if(m===we&&e&D){[B,b]=[y||e,null];continue}if(m===Wt&&e&Fe){[B,b,e]=[e,tt,ie];continue}if(m===ue&&e&K){[b,e]=[null,ae];continue}if(e&ve){[B,b,e]=[e,re,re];continue}}while(!1);f=m,d===null&&(d=B),d&&d!==b&&(I[I.length]=[d,c.substring(i,i=q)],I.length===R&&(yield I,I=[])),d=b,_=Qe,u=ze}x=c.substring(i,c.length)}!S&&x&&(I[I.length]=[d,x],yield I,I=[])}}Object.assign(at,{stateInfo:en,typeName:ot,tokenTypes:Pe,tokenRoles:Xt,typeMask:xe,roleMask:Je});Ue.exports=at});var Me=V((Vn,rt)=>{var Hn=console.log.bind(console),{tokenTypes:H,tokenRoles:it,roleMask:tn,typeMask:ct,typeName:nn}=de(),Oe=class{constructor(t,a=null){Object.defineProperty(this,0,{value:t}),this.start=a,this.content=[],this.end=null}get[Symbol.toStringTag](){return nn(this[0])}};function on(e,t){let a=new Oe(e,null);return a.name=t,a}function ut(){let e=this,t,a,s,y,f,T,A=!0;return Object.defineProperty(this,"state",{get:c=>({output:t,stack:a})}),Object.assign(this,{reset:k,write:_,batchWrite:u,read:S,readAll:x,end:v}),k();function k(){return t=[],a=[],s=!1,y=Object.create(null),f="",e}function*S(){return yield*t,t=[],e}function x(){let c=t;return t=[],c}function v(){for(;a.length;){let c=a.shift();a.length?a[0].content.push(c):t[t.length]=c}return e}function _(c){return u([c])}function u(c){for(let i of c){let[d,w]=i;switch(d&tn){case it.Start:let p=d&=ct,E=new Oe(p,w);p===H.EndTag?E.name=w.substr(2):p===H.StartTag&&(E.name=w.substr(1)),a.unshift(E),s=!1;break;case it.End:if(a.length){let h=a.shift();h.end=w,d&H.StartTag&&(h.attributes=y,y=Object.create(null),s&&(h.end="/>",h.selfclose=!0)),s=!1,a.length?a[0].content.push(h):t[t.length]=h}break;default:switch(d&ct){case H.BeforeAtt:s=w[w.length-1]==="/";break;case H.AttName:w in y?f=null:(f=w,y[w]="");break;case H.Value:f&&(y[f]+=w);break;case H.AfterAttName:case H.Assign:case H.BeforeValue:s=!1;break;default:w.length&&(a.length?a[0].content.push(i):t[t.length]=i,s=!1)}}}return e}}Object.assign(ut,{makeTagToken:on});rt.exports=ut});var Le=V((Wn,ft)=>{var $n=console.log.bind(console),ln=`body caption colgroup optgroup option select tr head html script div
  template col button p table li frameset frame noframes math svg br xmp
  a nobr font textarea meta hr style input keygen`.split(/\s+/g),Ne={TEXT:"#text",SPACE:"#space",h1_h6:"h1 h2 h3 h4 h5 h6",tbody:"tbody tfoot thead",cell:"td th",list:"ol ul",dddt:"dd dt",_fmt0:"b big code em i s small strike strong tt u",_void0:"area wbr",_void1:"param source track",_void3:"embed img",_meta0:"base basefont bgsound link",_meta1:"noscript title",_break:"sub sup var ruby span",_scope:"applet marquee object",_block1:"blockquote center dl listing menu pre",_block2:`article aside details dir fieldset figcaption
            figure footer form header hgroup main nav
            plaintext section summary address`},pe=0n,te={},ne={};for(let e of ln)te[e]=1n<<pe++;for(let e in Ne)ne[e]=1n<<pe++;ne.other=1n<<pe++;te.hiddenInput=1n<<pe++;te.htmlFont=1n<<pe++;var he={};for(let e in te)he[e]=(he[e]||0n)|te[e];for(let e in Ne)for(let t of Ne[e].split(/\s+/))he[t]=(he[t]||0n)|ne[e];function sn(e){if(e===0n)return"C.none";if(e===~0n)return"C.any";let t=e<0n?~e:e,a=[];for(let s in l)l[s]&t&&a.push("E."+s);for(let s in ne)ne[s]&t&&a.push("C0."+s);return`${e<0n?"~":""}(${a.join(" | ")})`}var l=te,r=Object.assign({},ne),an=r.other;r.any=-1n;r.none=0n;r.void=r._void0|r._void1|l.input|l.keygen|r._void3|r._meta0|l.meta|l.br|l.col|l.frame|l.hr|l.hiddenInput;r.meta=r._meta0|r._meta1|l.style|l.script|l.template|l.meta|l.noframes;r.format=r._fmt0|l.a|l.font|l.nobr|l.htmlFont;r._specialBlock=r._block1|r._block2;r.special=r._specialBlock|l.p|l.div|l.li|r.list|r.h1_h6|r.dddt|l.button;r.foreign=l.math|l.svg;r.tableIsh=l.table|l.caption|r.tbody|l.tr|r.cell;r.formatContext=l.html|l.template|l.caption|l.table|r.cell|r._scope;r.reformat=r._void0|l.input|l.keygen|r._scope|r.other|r.format|l.select|l.optgroup|l.option|l.button|l.math|l.svg|l.br|l.xmp|r.TEXT|r.SPACE,r.bodyContent=~(l.body|l.html|l.head|l.frameset|l.frame|l.caption|l.colgroup|l.col|r.tbody|l.tr|r.cell);r.pContent=r.bodyContent&~(l.p|l.div|r._specialBlock|r.dddt|r.h1_h6|r.list|l.li|l.xmp);r.tableContent=l.caption|l.colgroup|r.tbody|l.script|l.template|l.style|r.SPACE|l.hiddenInput;r.trContent=l.script|l.style|l.template|r.cell;r.tbodyContent=l.script|l.style|l.template|r.SPACE|l.tr;r.breakout=l.body|l.br|l.head|l.li|l.p|l.table|l.div|r._block1|r._break|l.meta|r._fmt0|l.nobr|r.dddt|r.h1_h6|r.list|r._void3|l.hr|l.htmlFont;r.closeSelect=l.input|l.keygen|l.textarea;ft.exports={elementInfo:he,defaultInfo:an,printInfo:sn,C:r,E:l}});var _e=V((zn,dt)=>{var Qn=console.log.bind(console),{E:n,C:o}=Le(),rn={},cn={allowEnd:o.none,escalate:o.none,content:n.html,openFor:o.any,paths:{"#default":"html"}},un={allowEnd:o.none,escalate:o.none,content:n.head,openFor:~o.SPACE,paths:{"#default":"head"}},fn={allowEnd:o.none,escalate:~n.frame,content:o.meta|o.SPACE},dn={allowEnd:o.none,content:n.body|n.frameset|o.SPACE,openFor:~(o.meta|n.frame|o.SPACE),paths:{"#default":"body"},foster:o.meta},pt={allowEnd:o.none,escalate:o.none,content:o.bodyContent},pn={allowEnd:o.none,escalate:o.none,content:n.frameset|n.frame|n.noframes|o.SPACE},hn={allowEnd:o.none,escalate:o.none,content:n.noframes|o.SPACE},De={foreign:!0,content:~o.breakout},ht={foreign:!1,allowEnd:n.svg,content:o.bodyContent},oe={foreign:!1,allowEnd:n.math,content:o.bodyContent},Ge={allowEnd:o.tableIsh,escalate:o.tableIsh,content:o.bodyContent},mn={content:o.bodyContent},gn={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:o.bodyContent},mt={allowEnd:~(n.option|n.optgroup|o.other|n.li|n.svg|n.math),content:o.bodyContent},bn={allowEnd:~(n.option|n.optgroup|o.other|n.p|n.svg|n.math),content:o.bodyContent&~n.button},yn={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:o.bodyContent&~o.h1_h6},gt={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:o.bodyContent&~n.li},Ee={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:o.bodyContent&~o.dddt},Xe={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:o.pContent},kn={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:Xe.content&~n.button},wn={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:gt.content&~n.button},En={allowEnd:~(n.option|n.optgroup|o.other|n.svg|n.math),content:Ee.content&~n.button},bt={allowEnd:o.tableIsh,escalate:o.closeSelect,content:n.option|n.optgroup|n.script|n.template|o.TEXT|o.SPACE},_n={allowEnd:o.tableIsh,escalate:o.closeSelect|o.tableIsh,content:n.option|n.optgroup|n.script|n.template|o.TEXT|o.SPACE},Tn={content:n.option|n.script|n.template|o.TEXT|o.SPACE},U=n.table|n.caption|n.colgroup|n.col|o.tbody|n.tr|o.cell,Cn={allowEnd:o.none,escalate:n.table,content:o.tableContent,openFor:n.col|n.tr|o.cell,paths:{col:"colgroup",tr:"tbody",td:"tbody",th:"tbody"},foster:~U},He={allowEnd:n.table,escalate:U&~(n.tr|o.cell),openFor:o.cell,paths:{td:"tr",th:"tr"},content:o.tbodyContent,foster:~U},Sn={allowEnd:n.table|o.tbody,escalate:U&~o.cell,content:o.trContent,foster:~U},yt={allowEnd:n.table|n.tr|o.tbody,escalate:U,content:o.bodyContent},Rn={allowEnd:n.table,content:n.col|n.template,foster:~U},xn={allowEnd:~(n.svg|n.math),forbid:n.option|n.optgroup,escalate:~o.h1_h6,allow:o.h1_h6},vn={content:Xe.content&~(n.option|n.optgroup)},Fn={content:n.script|n.template|o.TEXT|o.SPACE,escalate:o.closeSelect|o.tableIsh|n.option|n.optgroup},me={allowEnd:~(n.svg|n.math),allow:o.h1_h6|n.option|n.optgroup},kt={html:un,head:fn,body:pt,frameset:pn,template:{allowEnd:o.none,content:o.any},applet:Ge,object:Ge,marquee:Ge,svg:De,math:De,select:bt,div:me,address:me,dl:gn,ol:mt,ul:mt,dd:Ee,dt:Ee,button:bn,table:Cn,caption:{allowEnd:n.table,content:o.bodyContent},colgroup:Rn,thead:He,tbody:He,tfoot:He,tr:Sn,th:yt,td:yt},An={foreignObject:ht,desc:ht,title:pt},Pn={mi:oe,mo:oe,mn:oe,ms:oe,mtext:oe,"annotation-xml":oe};function In({foreign:e,closable:t},a,s){return e?(t&n.svg?An:Pn)[a]||De:s&o.h1_h6?yn:s&n.p?t&n.button?kn:Xe:s&n.li?t&n.button?wn:gt:s&o.dddt?t&n.button?En:Ee:s&n.select?t&n.table?_n:bt:s&n.option?t&n.select?Fn:t&n.p?vn:xn:s&n.optgroup?t&n.select?Tn:me:a in kt?kt[a]:s&o._specialBlock?mn:t&n.p?rn:me}var Bn={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"};dt.exports={SVGTagNameAdjustments:Bn,defaultRule:me,documentRule:cn,afterHeadRule:dn,afterFramesetRule:hn,getRule:In}});var Ct=V((Yn,wt)=>{var{tokenTypes:Un}=de(),{defaultInfo:Jn,info:Kn}=_e(),Et=class{constructor(){Object.defineProperties(this,{name:{value:"#document"},head:{value:null,writable:!0},body:{value:null,writable:!0}}),this.children=[]}push(t){this.children[this.children.length]=t}},_t=class{constructor(t){this.name=t.name,t.attributes&&(this.attributes=t.attributes),t.selfClosing&&(this.selfClosing=t.selfClosing)}},Tt=class{constructor(t){this.name=t.name,t.attributes&&(this.attributes=t.attributes),this.children=[],t.selfClosing&&(this.selfClosing=t.selfClosing)}push(t){this.children[this.children.length]=t}};wt.exports={Document:Et,Leaf:_t,Node:Tt}});var qt=V((no,St)=>{var{assign:Ve,defineProperties:Rt,setPrototypeOf:Zn}=Object,{tokenTypes:F,tokenRoles:xt,typeName:eo,typeMask:vt}=de(),{makeTagToken:ge}=Me(),{Document:Ft,Leaf:At,Node:Te}=Ct(),{E:g,C,elementInfo:Ce,defaultInfo:Se,printInfo:le}=Le(),{documentRule:jn,afterHeadRule:qn,afterFramesetRule:On,getRule:Pt,SVGTagNameAdjustments:It}=_e(),to=console.log.bind(console);function jt(e){let t=this,a,s,y,f,T;return Rt(this,{document:{get:_=>a}}),Ve(this,{reset:A,write:k,batchWrite:x,end:S}),A();function A(){s=y=null,a=new Ft;let{content:_,openFor:u,paths:c}=jn;return T=[{node:a,flags:C.none,closable:C.none,content:_,openable:C.any,openFor:u,foster:0n,paths:c}],f=new Bt(T,0),t}function k(_){return x([_])}function S(){let _=f._arr,u=Math.min(4,_.length-4);return _.length<4&&t.write(ge(F.StartTag,"body")),f.close(),t}function x(_){for(let u of _){u=v(u);let c=u[0]&vt,i=c===F.Data?u[0]&xt.Space?C.SPACE:C.TEXT:Ce[u.name]||Se,d=u.attributes;i&g.input&&(d.type||"").toLowerCase()==="hidden"?i=g.hiddenInput:i&g.font&&("color"in d||"face"in d||"size"in d)&&(i=g.htmlFont);let w=T[0].fosterStack,p=T[0].foster&i&&w||f,E=p._arr[0];if(c===F.StartTag&&i&(g.select|g.a|g.nobr)){if(i&g.select&&E.closable&g.select)u=ge(F.EndTag,u.name);else if(i&g.a&&E.closable&g.a){let h=p.openerFor("a",g.a);p.close(h,"a")}else if(i&g.nobr&&E.closable&g.nobr){let h=p.openerFor("nobr",g.nobr);p.close(h,"nobr")}}else if(c===F.EndTag&&i&(g.br|g.body|g.html|g.head|g.p))if(i&g.br)u=ge(F.StartTag,u.name);else if(i&g.p&&!(E.closable&g.p)){let h=p.prepareFor(u,i);h&&h._arr[0].node.push(new Te(u));continue}else{if(i&g.html&&E.closable&g.html)continue;if(i&g.body){if(E.closable&g.body)continue;p.afterHead||(u=ge(F.StartTag,u.name))}else if(i&g.head&&!(E.closable&g.head)){let h=ge(F.StartTag,u.name),P=p.prepareFor(h,i);P&&(p=P.open(h),E=p._arr[0])}}switch(u[0]&vt){case F.EndTag:i&C.h1_h6?index=p.openerFor(C.h1_h6,i):index=p.openerFor(u.name,i),index>=0&&p.close(index,u.name);break;case F.Comment:case F.Bogus:E.node.push(u);break;case F.PlainText:case F.RawText:case F.RcData:E.node.push(u[1]);break;case F.StartTag:{let h=p.prepareFor(u,i);h&&(i&C.void||u.selfclose&&h._arr[0].foreign?h._arr[0].node.push(new At(u)):h.open(u,i))}break;case F.Data:{let h=u[0]&xt.Space?C.SPACE:C.TEXT,P=p.prepareFor(u,h);P&&P._arr[0].node.push(u[1])}}}return t}function v(_){let u=_[0];return(u===F.StartTag||u===F.EndTag)&&(_.name=_.name.toLowerCase(),T[0].closable&g.svg&&_.name in It&&(_.name=It[_.name])),_}}function Bt(e=[],t=0){let a=this;a.afterHead=!1;let s=e,y=t,f=[],T={};Rt(this,{info:{get:A},_reopen:{get:()=>f}}),Ve(this,{openerFor:_,open:S,reformat:v,close:u,prepareFor:k,_arr:s});function A(){return s.map(({node:c})=>c.name).reverse().join(" ")}function k(c,i){for(;;){let d=s[0];if(d.content&i)return i&C.reformat?a.reformat():a;if(d.openFor&i){let w=i&C.TEXT?"#text":c.name,p=d.paths[w]||d.paths["#default"],E=Ce[p]||Se;S({name:p},E)}else if(d.openable&i){if(u(0,c.name)===null)return null}else return null}}function S(c,i=Ce[c.name]||Se){let d=new Te(c),w=$e(s[0],d,i,Pt(s[0],d.name,i));if(d.frame=w,i&g.table){w.parent=s[0].node;let p=w.fosterStack=x();p._arr[0].content=C.bodyContent,p.afterHead=!0}else s[0].node.push(d);return s.unshift(w),a}function x(c=[s[0]]){let i=new Bt(c,1);return i._arr[0].closable=C.none,i._arr[0].openable=C.none,i._arr[0].escalate=C.none,i}function v(c=f){for(let{node:i,flags:d}of c)S(i,d);return f=[],T={},a}function _(c,i){let d=-1;for(let w=0,p=s.length;w<p;w++){let{node:E,flags:h,closable:P}=s[w];if(c===E.name||typeof c=="bigint"&&h&c){d=w;break}if(!(i&P))break}return d}function u(c=s.length-2,i=null){let d=s[c];if(!d||c<t)return null;let w=d.flags,p,E;for(;c>=0;c--){E=s.shift();let{flags:h,node:{name:P}}=E;if(h&C.special&&w&C.format?p={frame:E,index:f.length,parent:s[0]}:h&C.formatContext?(p=null,f=[],T={}):h&C.format&&P!==i&&(T[P]=(T[P]||0)+1)<=3&&f.unshift(E),E.parent)E.parent.push(E.node);else if(h&(g.head|g.frameset)){let J=h&g.head?qn:On;s[0]=$e(s[1],s[0].node,s[0].flags,J),h&g.head&&(a.afterHead=!0,s[0].fosterStack=x([E]))}}if(p&&s.length){let h=f.length-p.index,P=f.slice(0,h),J=f.slice(h),Re=p.parent.node.children.pop(),R=p.frame.node,I=p.frame.flags;I&C.special&&v(P);let q=new Te({name:i}),We=Ce[q.name]||Se;q.children=R.children,R.children=[q],s[0].node.push(R);let B=$e(s[0],R,I,Pt(s[0],R.name,I));s.unshift(B),v(J)}return a}}function $e(e,t,a,s){let{closable:y,openable:f,fosterStack:T}=e,{foreign:A=e.foreign,content:k=e.content,openFor:S=0n,paths:x,foster:v=0n,allowEnd:_=C.any,escalate:u=C.any,allow:c=C.none,forbid:i=C.none}=s;return y=y&_|a,k=k&~i|c,f=f&u|k|S,{node:t,flags:a,foreign:A,closable:y,content:k,openable:f,openFor:S&~k,paths:x,foster:v&~k,fosterStack:T}}function Mn({node:e,flags:t,closable:a,content:s,openable:y,openFor:f=0n,paths:T,foster:A,fosterStack:k}){return{name:e.name,flags:le(t),closable:le(a),openable:le(y),content:le(s),openFor:le(f),paths:T,foster:le(A),fosterParent:k&&k._arr[0].node.name,node:e}}Ve(jt,{Document:Ft,Leaf:At,Node:Te,frameInfo:Mn});St.exports=jt});var Lt=V((so,Ot)=>{var{assign:oo,defineProperty:Mt}=Object,lo=console.log.bind(console),O={TreeBuilder:qt(),Lexer:de(),TokenBuilder:Me(),schema:_e()};function*Nn(e,t){let a=new O.TokenBuilder,s=t.write(e).end().read();for(let y of s)yield*a.write(y).readAll();yield*a.end().readAll()}function Ln(e){let t=new O.Lexer,a=Nn(e,t);return Mt(a,"state",{get:s=>t.state})}function Dn(e){let t=new O.Lexer,a=t.write(e).end().read();return Mt(a,"state",{get:s=>t.state})}function Nt(){let e=new O.Lexer,t=new O.TokenBuilder,a=new O.TreeBuilder(this);this.parse=function(y){e.reset(),t.reset(),a.reset();for(let f of e.write(y).end().batchRead(32))t.batchWrite(f),a.batchWrite(t.readAll());return a.end(),a.document}}O.parse=e=>new Nt().parse(e);O.tokens=Ln;O.Parser=Nt;O.chunks=Dn;O.version="0.8.0";Ot.exports=O});globalThis.modules=globalThis.modules||{};globalThis.modules.html=Lt();})();
