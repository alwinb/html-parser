(()=>{var W=(e,o)=>()=>(o||(o={exports:{}},e(o.exports,o)),o.exports);var re=W((Rn,Le)=>{var Tn=console.log.bind(console),Et=4278190080,we=65535,O=1<<25,C=1<<24,vt={Start:C,End:O},Ct=1<<16,ue=1<<15,Q=1<<14,Y=1<<13,N=1<<12,M=1<<11,ke=1<<10,ye=1<<9,X=1<<8,k=1,Me=k++,_e=k++,P=k++|M|Y|N,Te=k++|M|Y|N,H=k++|M|Y,Xe=k++|M,L=k++|M,B=k++|M|ue,V=k++|Q,$=k++|Q,Z=k++|Q|ke,ee=k++|Q|ye,He=k++|Q|ke|ye,te=k++|N,q=k++|N|ue,G=k++|X|N,$e=k++|X|N,ne=k++|X|N,U=k++|ue,Re={Data:P,RcData:Te,RawText:H,PlainText:Xe,Value:q,Space:_e,Comment:L,Bogus:B,NamedRef:G,NumRef:$e,HexRef:ne,MDecl:U,BeforeAtt:Z,AttName:ee,AfterAttName:He,BeforeValue:te,Assign:Me,StartTag:V,EndTag:$},We={};for(let e in Re)We[Re[e]&we]=e;var Qe=e=>{let o=We[e&we];return o&&(o+=e&C?"Start":e&O?"End":"",o+=e&Ct?" Warn":""),o||null},Ft={style:H,script:H,xmp:H,iframe:H,noembed:H,noframes:H,textarea:Te,title:Te,plaintext:Xe},xe=e=>9<=e&&e<=13&&e!==11||e===32,St=e=>48<=e&&e<=57,fe=e=>(e<=90&&(e+=32),97<=e&&e<=122),Ot=e=>(e<=90&&(e+=32),97<=e&&e<=102),[Ee,oe,qt,At,Bt,le,jt,ve,Ce,de,It,Ve,Nt,Pt,Ge,Dt]=`</="'-?!>&;#Xx\r
`.split("").map(e=>e.charCodeAt(0));function Lt(e){let o=String.fromCharCode,{line:l,col:s,last:h,quote:a,tagname:m,tagname_:y}=e,b={line:l,col:s,last:o(e.last),quote:e.quote?o(e.quote):null,tagname:m,tagname_:y};for(let _ in e)_ in b||(b[_]=Qe(e[_]));return b}function Ue(){let e,o,l,s,h,a,m,y,b,_,g,w,d,c,r,i,u,x=this;return Object.assign(this,{reset:I,write:K,end:yt,batchRead:Ne,read:_t,_unwrite:Tt}),Object.defineProperty(this,"state",{get:E=>{let S=i-c;return{line:d,col:S,st:e,sub:o,content:l,tag:s,refIn:h,last:a,quote:m,tagname:y,tagname_:b,label0:u}}}),I();function I(){return e=l=P,o=s=h=null,a=m=0,y=b=g="",_=!0,w=[],r="",u=P,i=c=0,d=1,x}function K(E){return _&&E.length&&(w[w.length]=E),x}function yt(E=""){return _=!1,E?K(E):x}function*_t(){for(let E of Ne(1))yield*E}function Tt(){let E=w;return E.unshift(r.substr(i)),[g,r,w]=["","",[]],E}function*Ne(E=4){let S=[];for(;w.length;){i=0,r=g?g+w.shift():w.shift();for(let D=g.length,Rt=r.length;D<Rt;D++){let v=u,p=e,Pe=d,De=c,f=r.charCodeAt(D);do{if((f===Ge||f===Dt&&a!==Ge)&&(Pe++,De=D+1),e&N&&a===de){if(fe(f)){[h,p,e]=[e,G,G];continue}if(f===Ve){[h,p,o]=[e,null,$e];continue}}if(o&X&&a===Ve&&(f===Nt||f===Pt)){[p,o]=[null,ne];continue}if((o||e)&X&&St(f)){e=o||e,[p,e,o]=[e,e,null];continue}if((o||e)===ne&&Ot(f)){[p,e,o]=[ne,ne,null];continue}if(e===G&&fe(f)){[p,e,o]=[G,G,null];continue}if(e&X&&f===It){[p,e,o,h]=[e,h,null,null];continue}if((o||e)&X&&([e,o,h]=[h,null,null]),m&&(e===q||h===q)){[v,p,e,o,m]=f===m?[e,q|O,Z,null,0]:[e,f===de?null:e,q,null,m];continue}if(f===Ee&&e&Y){[v,p]=[l,null];continue}if(f===oe&&a===Ee&&e&Y){[p,e]=[null,U];continue}if(e===P&&a===Ee){if(f===ve||f===oe){[p,e]=[null,U];continue}if(f===jt){[p,e]=[B|C,B];continue}if(fe(f)){[p,e,s,b]=[null,V,V,r[D]];continue}}if(s&&f===Ce){s===$&&l!==P&&y!==b?[p,e,s]=[l,l,null]:([y,l]=s===V?[b,Ft[b]||P]:["",P],[v,p,e,s]=[e===V||e===$?s|C:e,s|O,l,null]);continue}if(e&ue&&f===Ce){[v,p,e,o]=[B|(e===U?C:0),B|O,l,null];continue}if(e===L&&f===Ce){[p,e,o]=o===O||o===C&&a===le?[L|O,P,null]:[e,e,null];continue}if(e===U){if(a===oe&&fe(f)){[p,e,s,b]=[null,$,$,r[D]];continue}if(xe(f)){[v,p,e]=[B|C,_e,B];continue}if(f===le){[v,p,e,o]=a===le?[L|C,L|C,L,C]:[null,null,U,null];continue}else[u,p,e]=[B|C,B,B];continue}if(e===V||e===$){f===oe||xe(f)?[v,p,e,s]=s===$&&l!==P&&y!==b?[l,l,l,null]:[s|C,null,Z,s]:[p,b]=[null,b+r[D]];continue}if(xe(f)){[v,p,e]=e&M?[e,_e,e]:e===q&&!m?[q,null,Z]:e===ee?[ee,null,He]:[e,e,e];continue}if(p=e,e===L&&(f===ve?[p,o]=[o!==O?L:null,o===O&&a!==ve?o:null]:f===le?[p,o]=[null,o===O||a===le?O:o]:o=null),e===te){let xt;[v,p,e,m]=f===At||f===Bt?[te,q|C,q,f]:[te,f===de?null:q,q,0];continue}if(f===de&&e&N){[v,p]=[h||e,null];continue}if(f===qt&&e&ye){[v,p,e]=[e,Me,te];continue}if(f===oe&&e&Q){[p,e]=[null,Z];continue}if(e&ke){[v,p,e]=[e,ee,ee];continue}}while(!1);a=f,u===null&&(u=v),u&&u!==p&&(S[S.length]=[u,r.substring(i,i=D)],S.length===E&&(yield S,S=[])),u=p,d=Pe,c=De}g=r.substring(i,r.length)}!_&&g&&(S[S.length]=[u,g],yield S,S=[])}}Object.assign(Ue,{stateInfo:Lt,tokenName:Qe,tokenTypes:Re,tokenRoles:vt,typeMask:we,roleMask:Et});Le.exports=Ue});var Se=W((En,ze)=>{var xn=console.log.bind(console),{tokenTypes:z,tokenRoles:Je,roleMask:Mt,typeMask:Ke,tokenName:Xt}=re(),Fe=class{constructor(o,l=null){Object.defineProperty(this,0,{value:o}),this.start=l,this.content=[],this.end=null}get[Symbol.toStringTag](){return Xt(this[0])}};function Ht(e,o){let l=new Fe(e,null);return l.name=o,l}function Ye(){let e=this,o,l,s=!0;return Object.defineProperty(this,"state",{get:g=>({output:o,stack:l})}),Object.assign(this,{reset:h,write:b,batchWrite:_,read:a,readAll:m,end:y}),h();function h(){return o=[],l=[],e}function*a(){return yield*o,o=[],e}function m(){let g=o;return o=[],g}function y(){for(;l.length;){let g=l.shift();l.length?l[0].content.push(g):o[o.length]=g}return e}function b(g){return _([g])}function _(g){for(let[w,d]of g)switch(w&Mt){case Je.Start:w&=Ke;let c=new Fe(w,d);w===z.EndTag?c.name=d.substr(2):w===z.StartTag&&(c.name=d.substr(1)),l.unshift(c);break;case Je.End:if(l.length){let r=l.shift();r.end=d,l.length?l[0].content.push(r):o[o.length]=r}break;default:switch(w&=Ke){case z.BeforeAtt:case z.AfterAttName:case z.Assign:case z.BeforeValue:break;default:if(d.length){let r=[w,d];l.length?l[0].content.push(r):o[o.length]=r}}}return e}}Object.assign(Ye,{makeTagToken:Ht});ze.exports=Ye});var he=W((Cn,Ze)=>{var vn=console.log.bind(console),$t=`body caption colgroup optgroup option select tr head html script div
  template col button p table li frameset frame noframes math svg br xmp
  a font textarea meta hr`.split(/\s+/g),Oe={h1_h6:"h1 h2 h3 h4 h5 h6",tbody:"tbody tfoot thead",cell:"td th",list:"ol ul",dddt:"dd dt",TEXT:"#text",_fmt0:"b big code em i nobr s small strike strong tt u",_void0:"area wbr",_void1:"param source track",_void2:"input keygen",_void3:"embed img",_meta0:"base basefont bgsound link",_meta1:"noscript style title",_break:"sub sup var ruby span",_scope:"applet marquee object",_block1:"blockquote center dl listing menu pre",_block2:`article aside details dir fieldset figcaption
            figure footer form header hgroup main nav
            plaintext section summary address`},qe=0n,se={},J={};for(let e of $t)se[e]=1n<<qe++;for(let e in Oe)J[e]=1n<<qe++;J.other=1n<<qe++;var ie={};for(let e in se)ie[e]=(ie[e]||0n)|se[e];for(let e in Oe)for(let o of Oe[e].split(/\s+/))ie[o]=(ie[o]||0n)|J[e];function Wt(e){if(e===0n)return"C.none";if(e===~0n)return"C.any";let o=e<0n?~e:e,l=[];for(let s in t)t[s]&o&&l.push("E."+s);for(let s in J)J[s]&o&&l.push("C0."+s);return`${e<0n?"~":""}(${l.join(" | ")})`}var t=se,n=Object.assign({},J),Qt=n.other;n.any=-1n;n.none=0n;n.void=n._void0|n._void1|n._void2|n._void3|n._meta0|t.meta|t.br|t.col|t.frame|t.hr;n.meta=n._meta0|n._meta1|t.script|t.template|t.meta|t.noframes;n.format=n._fmt0|t.a|t.font;n.specialBlock=n._block1|n._block2;n.foreign=t.math|t.svg;n.bodyContent=~(t.body|t.html|t.head|t.frameset|t.frame|t.caption|t.colgroup|t.col|n.tbody|t.tr|n.cell);n.pContent=n.bodyContent&~(t.p|t.div|n.specialBlock|n.dddt|n.h1_h6|n.list|t.li|t.xmp);n.tableIsh=t.table|t.caption|n.tbody|t.tr|n.cell;n.reopen=n._void0|n._void2|n._scope|n.other|n.format|t.select|t.optgroup|t.option|t.button|t.math|t.svg|t.br|t.xmp;n.formatContext=t.html|t.template|t.caption|t.table|n.cell|n._scope;n.breakout=t.body|t.br|t.head|t.li|t.p|t.table|t.div|n._block1|n._break|t.meta|n._fmt0|n.dddt|n.h1_h6|n.list|n._void3|t.hr;n.closeSelect=n._void2|t.textarea;var Vt={allowEnd:n.none,allowOpen:n.none,content:t.html,openFor:n.any,paths:{"#default":"html"}},j={allowEnd:n.none,allowOpen:n.none,content:n.bodyContent},Gt={allowEnd:n.none,content:n.meta|t.body|t.frameset,openFor:n.any,paths:{"#default":"body"}},pe={content:~n.breakout},Ae={allowEnd:n.tableIsh,allowOpen:n.tableIsh,content:n.bodyContent},Ut={allowEnd:~(t.option|t.optgroup|n.other),content:n.pContent},zt={allowEnd:~(t.option|t.optgroup|n.other),content:n.pContent&~t.button},Jt={allowEnd:~(t.option|t.optgroup|n.other|t.p),content:n.bodyContent&~t.button},et={allowEnd:~(t.option|t.optgroup|t.li|n.other),content:n.bodyContent},Kt={allowEnd:~(t.option|t.optgroup|n.other),content:n.bodyContent},Yt={allowEnd:n.tableIsh,allowOpen:n.closeSelect|n.tableIsh,content:t.option|t.optgroup|t.script|t.template|n.TEXT},Zt={content:t.option|t.script|t.template|n.TEXT},en={content:t.script|t.template|n.TEXT},tn={allowEnd:n.none,allowOpen:n.none,content:t.caption|t.colgroup|n.tbody|t.script|t.template,openFor:t.col|t.tr|n.cell,paths:{col:"colgroup",tr:"tbody",td:"tbody",th:"tbody"}},Be={allowEnd:t.table,content:t.tr|t.script|t.template,openFor:n.cell,paths:{td:"tr",th:"tr"}},nn={allowEnd:t.table,content:n.cell|t.script|t.template},tt={allowEnd:t.table|t.tr|n.tbody,content:n.bodyContent},on={allowEnd:~(t.option|t.optgroup|n.other),forbid:t.li,allow:n.h1_h6|n.dddt|t.option|t.optgroup},nt={allowEnd:~(t.option|t.optgroup|n.other),forbid:n.dddt,allow:n.h1_h6|t.li|t.option|t.optgroup},ln={allowEnd:~(t.option|t.optgroup|n.other),forbid:n.h1_h6,allow:t.li|n.dddt|t.a|t.option|t.optgroup},rn={forbid:t.a,allow:t.option|t.optgroup},sn={forbid:t.option|t.optgroup,allow:n.h1_h6},an={allow:n.h1_h6|t.li|t.a|n.dddt|t.option|t.optgroup},ae={allow:n.h1_h6|t.option|t.optgroup},cn={},ot={html:{allowEnd:n.none,content:t.head,openFor:n.any,paths:{"#default":"head"}},head:{content:n.meta},body:j,frameset:{allowEnd:n.none,content:t.frameset|t.frame|t.noframes},template:{allowEnd:n.none,content:n.any},applet:Ae,object:Ae,marquee:Ae,svg:pe,math:pe,select:Yt,div:ae,address:ae,dl:Kt,ol:et,ul:et,li:on,dd:nt,dt:nt,button:Jt,a:rn,table:tn,caption:{allowEnd:t.table,content:n.bodyContent},colgroup:{allowEnd:t.table,content:t.col|t.template},thead:Be,tbody:Be,tfoot:Be,tr:nn,th:tt,td:tt},un={foreignObject:j,desc:j,title:j},fn={mi:j,mo:j,mn:j,ms:j,mtext:j,"annotation-xml":j};function dn({closable:e,node:o},l,s){return e&t.svg?un[l]||pe:e&t.math?fn[l]||pe:s&n.h1_h6?ln:s&t.p?e&t.button?zt:Ut:s&t.option?e&t.select?en:sn:s&t.optgroup?e&t.select?Zt:ae:l in ot?ot[l]:s&n.specialBlock?an:e&t.p?cn:ae}Ze.exports={elements:se,tagNameSets:n,elementInfo:ie,defaultInfo:Qt,printInfo:Wt,defaultRule:ae,documentRule:Vt,afterHeadRule:Gt,getRule:dn}});var at=W((qn,lt)=>{var{tokenTypes:Fn}=re(),{defaultInfo:Sn,info:On}=he(),rt=class{constructor(){Object.defineProperties(this,{name:{value:"#document"},head:{value:null,writable:!0},body:{value:null,writable:!0}}),this.children=[]}push(o){this.children[this.children.length]=o}},st=class{constructor(o){this.name=o.name,o.attributes&&(this.attributes=o.attributes),o.selfClosing&&(this.selfClosing=o.selfClosing)}},it=class{constructor(o){this.name=o.name,o.attributes&&(this.attributes=o.attributes),this.children=[],o.selfClosing&&(this.selfClosing=o.selfClosing)}push(o){this.children[this.children.length]=o}};lt.exports={Document:rt,Leaf:st,Node:it}});var mt=W((In,ct)=>{var An=console.log.bind(console),{assign:je,defineProperties:ut,setPrototypeOf:Bn}=Object,{tokenTypes:T,tokenName:jn}=re(),{makeTagToken:me}=Se(),{Document:ft,Leaf:dt,Node:Ie}=at(),{elements:A,tagNameSets:R,elementInfo:be,defaultInfo:ge,printInfo:ce,documentRule:pn,afterHeadRule:hn,getRule:mn}=he();function ht(e){let o=this,l,s,h,a,m,y;return ut(this,{document:{get:c=>l}}),je(this,{reset:b,write:g,batchWrite:w,end:_}),b();function b(){s=h=null,l=new ft,y=!1;let{content:c,openFor:r,paths:i}=pn;return m=[{node:l,flags:R.none,closable:R.none,allowed:c,openable:R.any,openFor:r,paths:i}],a=new pt(m,d),o}function _(){for(let c=0,r=m.length;c<r;c++){let i=m[c];i.parent&&i.parent.push(i.node)}}function g(c){return w([c])}function w(c){for(let r of c){let i;if(r[0]===T.StartTag)i=be[r.name]||ge,i&A.select&&m[0].closable&A.select&&(r=me(T.EndTag,r.name));else if(r[0]===T.EndTag){if(i=be[r.name]||ge,i&A.br)r=me(T.VoidTag,r.name);else if(i&(A.body|A.html)){if(y)continue;r=me(T.StartTag,r.name)}else if(i&A.p&&!(m[0].closable&A.p)){let u=a.prepareFor(r,i);u&&u._arr[0].node.push(new Ie(r))}else if(i&A.head&&!y){let u=me(T.StartTag,r.name),x=a.prepareFor(u,i);x&&x.open(u,i)&&d(i)}}switch(r[0]){case T.EndTag:{let u;i&R.h1_h6?u=a.openerFor(R.h1_h6,i):u=a.openerFor(r.name,i),u>=0&&a.close(u,r.name)}break;case T.Comment:case T.Bogus:m[0].node.push(r);break;case T.Space:case T.PlainText:case T.RawText:case T.RcData:m[0].node.push(r[1]);break;case T.StartTag:{let u=a.prepareFor(r,i);u&&(i&R.reopen&&u.reformat(),i&R.void?u._arr[0].node.push(new dt(r)):u.open(r,i)&&d(i))}break;case T.Data:{let u=a.prepareFor(r[1],R.TEXT);u&&(u.reformat(),u._arr[0].node.push(r[1]))}}}return o}function d(c){c&A.head?(l.head=s=m[0],je(m[m.length-2],hn),y=!0):c&A.body&&(l.body=h=m[0],e&&e.onBodyStart&&e.onBodyStart(l,s))}}function pt(e=[],o){let l=this,s=e,h=[],a={};ut(this,{info:{get:m},_reopen:{get:()=>h}}),je(this,{openerFor:g,open:b,reformat:_,close:w,prepareFor:y,_arr:s});function m(){return s.map(({node:d})=>d.name).reverse().join(" ")}function y(d,c){for(;;){let r=s[0];if(r.allowed&c)return l;if(r.openFor&c){let i=c&R.TEXT?"#text":d.name,u=r.paths[i]||r.paths["#default"],x=be[u]||ge;b({name:u},x)&&o(x)}else if(r.openable&c)w(0,d.name);else return r.foster?r.foster:null}}function b(d,c=be[d.name]||ge){let r=new Ie(d),i=bn(s[0],r,c);return r.frame=i,c&A.table?(i.parent=s[0].node,i.foster=s[0].foster||new pt(s.slice(0),o)):s[0].node.push(r),s.unshift(i),s[0]}function _(){for(let{node:d,flags:c}of h)b(d,c);h=[],a={}}function g(d,c){let r=-1;for(let i=0,u=s.length;i<u;i++){let{node:x,flags:I,closable:K}=s[i];if(d===x.name||typeof d=="bigint"&&I&d){r=i;break}if(!(c&K))break}return r}function w(d,c=null){let{flags:r}=s[d];for(;d>=0;d--){let i=s.shift(),{parent:u,flags:x,node:I}=i;u&&u.push(I),x&R.format&&I.name!==c&&(a[I.name]=(a[I.name]||0)+1)<=3&&h.unshift(i)}r&R.formatContext&&(h=[],a={})}}function bn(e,o,l){let s=mn(e,o.name,l),{closable:h,allowed:a,openable:m,foster:y}=e,{allowEnd:b=R.any,allowOpen:_=R.any,content:g=e.allowed,allow:w=R.none,forbid:d=R.none,openFor:c=0n,paths:r}=s;return h=h&b|l,a=g&~d|w,m=m&_|a|c,{node:o,flags:l,closable:h,allowed:a,openable:m,openFor:c&~a,paths:r,foster:y}}function gn({node:e,flags:o,closable:l,allowed:s,openable:h,openFor:a=0n,paths:m}){return{name:e.name,flags:ce(o),closable:ce(l),openable:ce(h),allowed:ce(s),openFor:ce(a),paths:m}}Object.assign(ht,{Document:ft,Leaf:dt,Node:Ie,frameInfo:gn});ct.exports=ht});var kt=W((Dn,bt)=>{var{assign:Nn,defineProperty:gt}=Object,Pn=console.log.bind(console),F={TreeBuilder:mt(),Lexer:re(),TokenBuilder:Se(),schema:he()};function*wn(e,o){let l=new F.TokenBuilder,s=o.write(e).end().read();for(let h of s)yield*l.write(h).readAll();yield*l.end().readAll()}function kn(e){let o=new F.Lexer,l=wn(e,o);return gt(l,"state",{get:s=>o.state})}function yn(e){let o=new F.Lexer,l=o.write(e).end().read();return gt(l,"state",{get:s=>o.state})}function wt(){let e=new F.Lexer,o=new F.TokenBuilder,l=new F.TreeBuilder(this);this.parse=function(h){e.reset(),o.reset(),l.reset();for(let a of e.write(h).end().batchRead(32))o.batchWrite(a),l.batchWrite(o.readAll());return l.end(),l.document}}F.parse=e=>new wt().parse(e);F.tokens=kn;F.Parser=wt;F.chunks=yn;F.version="0.6.0";bt.exports=F});globalThis.modules=globalThis.modules||{};globalThis.modules.html=kt();})();
