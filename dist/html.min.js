(()=>{var pe=(e,n)=>()=>(n||(n={exports:{}},e(n.exports,n)),n.exports);var Fe=pe((Ho,At)=>{var Do=console.log.bind(console),mn=`html body head caption colgroup optgroup option select tr script div
  template col button p table li frameset frame noframes math svg br xmp
  a nobr font textarea meta hr style input keygen annotation-xml embed
  img image noscript title form`.split(/\s+/g),et={DATA:"#data",COMMENT:"#comment",SPACE:"#space",TEXT:"#text",h1_h6:"h1 h2 h3 h4 h5 h6",tbody:"tbody tfoot thead",cell:"td th",list:"ol ul",dddt:"dd dt",_fmt0:"b big code em i s small strike strong tt u",_void0:"area wbr",_void1:"param source track",_meta0:"base basefont bgsound link",_break:"sub sup var ruby span",_scope:"applet marquee object",_block1:"blockquote center dl menu",_block2:"listing pre",_block3:`article aside details dir fieldset figcaption
            figure footer header hgroup main nav
            plaintext section summary address`},ke=0n,xe={},le={};for(let e of mn)xe[e]=1n<<ke++;for(let e in et)le[e]=1n<<ke++;le.other=1n<<ke++;le.htmlFont=1n<<ke++;le.hiddenInput=1n<<ke++;le.annotationHtml=1n<<ke++;le.annotationXml=xe["annotation-xml"];var Re={};for(let e in xe)Re[e]=(Re[e]||0n)|xe[e];for(let e in et)for(let n of et[e].split(/\s+/))Re[n]=(Re[n]||0n)|le[e];function bn(e){if(e===~0n)return"Any";if(e===0n)return"None";let n=e<0n?~e:e,a=[];for(let s in o)n&o[s]&&a.push("E."+s);for(let s in le)le[s]&n&&a.push("C."+s);return`${e<0n?"~":""}`+(a.length===1?a[0]:`(${a.join(" | ")})`)}var o=xe,r=Object.assign({},le),gn=r.other,yn=0n,kn=-1n;r.void=r._void0|r._void1|o.input|o.keygen|o.embed|o.img|r._meta0|o.meta|o.br|o.col|o.frame|o.hr|r.hiddenInput;r.meta=r._meta0|o.noscript|o.title|o.style|o.script|o.template|o.meta|o.noframes;r.format=r._fmt0|o.a|o.font|o.nobr|r.htmlFont;r._specialBlock=r._block1|r._block2|r._block3|o.form;r.special=r._specialBlock|o.p|o.div|o.li|r.list|r.h1_h6|r.dddt|o.button;r.foreign=o.math|o.svg;r.RcData=o.textarea|o.title;r.RawText=o.style|o.script|o.xmp|o.noframes;r.formatContext=o.html|o.template|o.caption|o.table|r.cell|r._scope;r.reformat=r._void0|o.input|o.keygen|r._scope|r.other|r.format|o.select|o.optgroup|o.option|o.button|o.math|o.svg|o.br|o.xmp|r.TEXT|r.SPACE,r.bodyContent=~(o.body|o.html|o.head|o.frameset|o.frame|o.caption|o.colgroup|o.col|r.tbody|o.tr|r.cell);r.pContent=r.bodyContent&~(o.p|o.div|r._specialBlock|r.dddt|r.h1_h6|r.list|o.li|o.xmp);r.tableIsh=o.table|o.caption|o.colgroup|o.col|r.tbody|o.tr|r.cell;r.tableContent=o.caption|o.colgroup|r.tbody|o.script|o.template|o.style|r.hiddenInput|r.SPACE|r.COMMENT;r.trContent=o.script|o.style|o.template|r.cell|r.hiddenInput|r.SPACE|r.COMMENT;r.tbodyContent=o.script|o.style|o.template|o.tr|r.hiddenInput|r.SPACE|r.COMMENT;r.breakout=o.body|o.br|o.head|o.li|o.p|o.table|o.div|r._block1|r._block2|r._break|o.meta|r._fmt0|o.nobr|r.dddt|r.h1_h6|r.list|o.embed|o.img|o.hr|r.htmlFont;r.closeSelect=o.input|o.keygen|o.textarea;r.startTagExceptions=o.select|o.image|o.input|o.font|r.annotationXml|o.a|o.nobr|o.body|o.head;r.endTagExceptions=o.br|o.p|o.body|o.head|r.h1_h6;r.framesetOK=o.optgroup|o.option|o.div|o.p|r.h1_h6|r.list|r.format|r._void1|r._block1|r._block3|o.form|r.other|r.COMMENT|r.SPACE|o.html|o.head|r._break|r.hiddenInput;r.metaRedirect=r.meta&~o.noscript;r.fosterParented=~(r.tableIsh|o.script|o.template|o.style|r.hiddenInput|r.COMMENT|r.SPACE);At.exports={Any:kn,None:yn,C:r,E:o,kinds:Re,otherKind:gn,printKind:bn}});var lt=pe((jo,wt)=>{var{defineProperty:xt,assign:En,setPrototypeOf:Tn}=Object,Rt=(e,n)=>{for(let a in n)xt(e,a,{value:n[a],enumerable:!1,configurable:!0})},Cn=(e,n)=>{for(let a in n)xt(e,a,{get:n[a],enumerable:!0,configurable:!0})},qo=console.log.bind(console),{Any:St,None:D,kinds:Le,otherKind:De,printKind:_n,C:tt}=Fe();function nt(e,n){this.name=e,n&&(this.attrs=n),this.children=[]}function An(e,n){this.name=e,n&&(this.attrs=n)}var ot=({childRule:e,siblingRule:n,ruleInfo:a})=>{class s{constructor(d,w){let x={namespace:D,name:d.name,kind:D,closable:D,openable:D,content:D,node:d};return this.applyRule.call(x,w)}applyRule(d,{name:w,kind:x,node:k,children:q=D}=this){let{namespace:f=this.namespace,allowEnd:C=St,escalate:L=St,content:B=this.content,allow:R=D,forbid:F=D,openFor:g=D,paths:A=null,redirect:P=D,redirectTo:_=this.redirectTo,reparent:E=D,fosterParent:m=this.fosterParent,_reopen:N=D,siblingRules:W=!1}=d,oe=(B|E)&~F|R,M=Tn({namespace:f,name:w,kind:x,children:q,closable:this.closable&C,openable:this.openable&L|oe|g,content:oe,openFor:g,paths:A,redirect:P&~oe,redirectTo:_,fosterParent:m,siblingRules:W,_reopen:N,reparent:E,node:k},s.prototype);return Rt(k,{frame:M}),M}child(d,w,x,k=new nt(d,x)){let q=e(this,d,w,this.children),f=this.applyRule(q,{name:d,kind:w,node:k});return f.closable|=w,f}_select(d,w){for(let x of this.node.children)if(x.name===d)return this.child(d,w,null,x);return null}get info(){let d=En({},this);for(let w in d)typeof d[w]=="bigint"&&(d[w]=_n(d[w]));return d.redirectTo=this.redirectTo?.name,d}}function c({context:y,node:d,minDepth:w=1,verbose:x=!1}){let k=this,q,f,C,L,B,R,F=D,g,A=D,P;return Cn(this,{stack:()=>C,tip:()=>f,document:()=>q,allOpened:()=>B,allClosed:()=>R}),Rt(this,{reset:_,_onopen:E,_onclose:m,log:we,prepare:N,tryOpen:W,tryAppend:oe,tryClose:M,_open:G,_select:Be,_reformat:j,canClose:T}),_();function _(){return q=d||new nt(y.name||"#root"),f=new s(q,y),C=[f],L=[],B=D,R=D,k}function E(p,u){F=p,g=u}function m(p,u){A=p,P=u}function N(p,u,i=f.namespace){for(let b=0;b<3;b++){if(u&f.content)return k;let S=Ne(p,u,i);if(S){let ie=Z(S.index+1);if(S.done)return k}let V=Ie(p,u);if(V&&V.path.length){for(let ie of V.path){let Ze=f.reparent&u?f.fosterParent:f.node,_t=Ze.children.length;Ze.children[_t]=ie.node,f.children|=ie.kind,C.push(f=ie),B|=ie.kind,F&ie.kind&&g(ie.name,ie.kind,ie.node,Ze,_t)}if(V.done)return k}}return null}function W(p,u=Le[p]||De,i,b){return N(p,u,b)?G(p,u,i):null}function oe(p,u=Le[p]||De){return N(p?p.name:null,u)?((f.reparent&u?f.fosterParent:f.node).children.push(p),f.children|=u,B|=u,k):null}function M(p,u=Le[p]||De){let i=T(p,u);return i&&Z(i.index)?k:null}function G(p,u,i){let b=f.child(p,u,i),S=f.reparent&u?f.fosterParent:f.node,V=S.children.length;return S.children[V]=b.node,f.children|=u,C.push(f=b),B|=u,F&u&&g(p,u,b.node,S,V),k}function Z(p=C.length-1){if(p<w)return null;let u=[],i=D,b;for(;C.length>p;){let S=C.pop();i=S.kind,b=S.name,R|=S.kind,u.push(S),L.push(S)}return i&tt.format&&L.length&&L.pop(),f=C[C.length-1],f.siblingRules&&Ye(b,i),u}function Ye(p,u){C.pop();let i=n(f,p,u,B);i!=null&&(C[C.length]=f=f.applyRule(i))}function j(){let p={},u=[];for(let{name:i,kind:b}of L)b&tt.format?(p[i]=(p[i]||0)+1)<=3&&u.unshift({name:i,kind:b}):b&tt.formatContext&&(p={},u=[]);for(let{name:i,kind:b}of u)k.tryOpen(i,b);L=[]}function T(p,u,i=null){for(let b=C.length-1;b>=0;b--){let S=C[b];if(S.name===p)return{index:b,frame:S};if(p===null&&S.kind&u)return{index:b,frame:S};if(!(S.closable&u))return null}}function Ne(p,u,i){if(u&f.openable)for(let b=C.length-1;b>=0;b--){let S=C[b],V=i===S.namespace;if(V&&u&S.content)return{index:b,frame:S,done:!0};if(V&&u&S.openFor)return{index:b,frame:S,done:!1}}}function Ie(p,u){let i=[],b=f,S;if(u&f.openFor)for(;b&&!(b.content&u)&&b.openFor&u;){let V=p in b.paths?b.paths[p]:b.paths["#default"];b=b.child(V,Le[V]||De),i.push(b)}return i.length?{path:i,done:b.content&u}:null}function Be(p,u){let i=f._select(p,u);return i&&C.push(f=i),i?k:null}function we(...p){return x&&console.log(`
`+C.map(u=>u.name).join(" > "),...p.length?["::",...p]:[]),k}}return c};Object.assign(ot,{Node:nt,Leaf:An,TreeBuilder:ot});wt.exports=ot});var Ve=pe((Vo,Mt)=>{var{defineProperty:Pt,assign:Xo,setPrototypeOf:Go}=Object,wn=(e,n)=>{for(let a in n)Pt(e,a,{get:n[a],enumerable:!1,configurable:!0})},xn=(e,n)=>{for(let a in n)Pt(e,a,{value:n[a],enumerable:!1,configurable:!0})},Ko=console.log.bind(console);function*vt(e=0n){for(;;)yield 1n<<e++}var[Rn,Sn,rt,Ot,He,Nt,qe,It,at,Se,Bt,Ee,Te,st,Ft,je,Lt,Xe,Dt,K,Ge,ce,Mn]=vt(),Pn=st|K,Ke=K|ce|Ge,it=rt|Ot|He|Nt,v=Mn,Ht=[[7n,Sn,rt,v,Ot,He,v,v,Rn,v],[0n,v],[3n,Ee,v,Te,Nt,qe,It,at,v,v,Se,Bt,v],[6n,v,Ft,je,Lt,Xe,Dt,st],[0n,v,K,K,K,K,K,K,ce],[8n,Ge,ce,ce,v,v,v,v,v,ce],[0n,v,K,K,K,K,K,K,ce],[8n,Ge,ce,ce,v,v,v,v,v,ce],[0n,v]];function vn(e){let n=e.length-1;return a=>{let s=a>>4,c=e[n<=s?n:s],y=a+c[0]&15,d=c.length-1;return c[d<=y?d:y+1]}}var Wo=vn(Ht),$=1n<<1n,ee=1n<<2n,We=1n<<3n,qt=1n<<4n;Warn=1n<<5n;var jt=0b11111n,On={Start:$,End:ee,Leaf:qt,Space:We,Warn},[he,fe,re,z,me,Q,Ce,ue,ct,be,ut,_e,ge,ye,Me,Ae,J,Xt]=vt(6n),Gt=~jt,I=0n,Kt=Q|Ce|ue,Nn=Q|Ce|ue|ct|re|z,In=ge|he|fe|Me|ye,Pe=be|ut|_e,Wt=Q|Ce|Ae|J|Pe,Bn=me|z|J,ft={StartTag:he,EndTag:fe,Comment:re,Bogus:z,MDecl:me,Data:Q,RcData:Ce,RawText:ue,PlainText:ct,NamedRef:be,NumRef:ut,HexRef:_e,BeforeAtt:ge,AttName:ye,AfterAttName:Me,BeforeValue:Ae,Value:J,Assign:Xt},Vt={};for(let e in ft)Vt[ft[e]]=e;var dt=e=>{let n=Vt[e&Gt]||"";return n+=e&$?"Start":e&ee?"End":e&We?"Space":e&qt?"Leaf":"",n+=e&Warn?" Warn":"",n},Fn={style:ue,script:ue,xmp:ue,iframe:ue,noembed:ue,noframes:ue,textarea:Ce,title:Ce,plaintext:ct};function Ln(e){let n=String.fromCharCode,{line:a,col:s,last:c,quote:y,tagname:d,tagname_:w}=e,x={line:a,col:s,last:e.last,quote:e.quote?e.quote:null,tagname:d,tagname_:w};for(let k in e)!(k in x)&&x[k]&&(x[k]=dt(e[k]));return x.st=dt(e.st),x}function pt(){let e,n,a,s,c,y,d,w,x,k,q,f,C,L,B,R,F,g;xn(this,{reset:P,write:_,end:E,setNamespace:W,batchRead:oe,read:m,_unwrite:N}),wn(this,{state:()=>{let M=F-B;return{line:L,col:M,st:e,sub:n,content:a,tag:s,refIn:c,last:y,quote:d,tagname:w,tagname_:x,label0:g}}});let A=this;return P();function P(){return e=a=Q,n=s=c=I,y=d=I,w=x=f="",q=!0,C=[],R="",g=Q,F=B=0,L=1,A}function _(M){return q&&M.length&&(C[C.length]=M),A}function E(M=""){return q=!1,M?_(M):A}function*m(){for(let M of oe(1))yield*M}function N(){let M=C;return M.unshift(R.substr(F)),[f,R,C]=["","",[]],M}function W(M){k=M}function*oe(M=4){let G=[];for(;C.length;){F=0,R=f?f+C.shift():C.shift();for(let Z=f.length,Ye=R.length;Z<Ye;Z++){let j=g,T=e,Ne=L,Ie=B,Be=BigInt(R.charCodeAt(Z)),we=Ht[Be>>4n]||[0n,v],p=Be+we[0]&0b1111n,u=BigInt(we.length)-1n,i=we[u<=p?u:p+1n];do{if(i&(He|rt)&&y!==He&&(Ne++,Ie=Z+1),e&Wt&&y&Se){if(i&Ke){[c,T,e]=[e,be,be];continue}if(i===at){[c,T,n]=[e,null,ut];continue}}if(n&Pe&&y&at&&i===Ge){[T,n]=[null,_e];continue}if((n||e)&Pe&&i===st){e=n||e,[T,e,n]=[e,e,I];continue}if((n||e)&_e&&i&Pn){[T,e,n]=[_e,_e,I];continue}if(e&be&&i&Ke){[T,e,n]=[be,be,I];continue}if(e&Pe&&i===Ft){[T,e,n,c]=[e,c,I,I];continue}if((n||e)&Pe&&([e,n,c]=[c,I,I]),d&&(e|c)&J){[j,T,e,n,d]=i===d?[e,J|ee,ge,I,I]:[e,i===Se?null:e,J,I,d];continue}if(i===je&&e&Kt){[j,T]=[a,null];continue}if(i===Te&&y&je&&e&Kt){[T,e]=[null,me];continue}if(e&Q&&y&je){if(i&(qe|Te)){[T,e]=[null,me];continue}if(i===Dt){[T,e]=[z|$,z];continue}if(i&Ke){[T,e,s,x]=[null,he,he,R[Z]];continue}}if(s&&i===Xe){s===fe&&a!==Q&&w!==x?[T,e,s]=[a,a,null]:(s===he?(a=k?Q:Fn[x]||Q,w=x):(a=Q,w=""),[j,T,e,s]=[e&he||e&fe?s|$:e,s|ee,a,null]);continue}if(e&Bn&&i===Xe){let b=e&me?$:I;[j,T,e,n]=[z|b,z|ee,a,I];continue}if(e&re&&i===Xe){[T,e,n]=n===ee||n===$&&y&Ee?[re|ee,Q,I]:[e,e,I];continue}if(e===me){if(y&Te&&i&Ke){[T,e,s,x]=[null,fe,fe,R[Z]];continue}if(i&it){[j,T,e]=[z|$,re|We,z];continue}if(i===Ee){[j,T,e,n]=y===Ee?[re|$,re|$,re,$]:[null,null,me,I];continue}else[g,T,e]=[z|$,z,z];continue}if(e&(he|fe)){i&(Te|it)?[j,T,e,s]=s===fe&&a!==Q&&w!==x?[a,a,a,null]:[s|$,null,ge,s]:[T,x]=[null,x+R[Z]];continue}if(i&it){[j,T,e]=e&Nn?[e,e|We,e]:e===J&&!d?[J,null,ge]:e===ye?[ye,null,Me]:[e,e,e];continue}if(T=e,e===re&&(i===qe?[T,n]=[n!==ee?re:null,n===ee&&y!==qe?n:I]:i===Ee?[T,n]=[null,n===ee||y===Ee?ee:n]:n=I),e===Ae){let b;[j,T,e,d]=i&(It|Bt)?[Ae,J|$,J,i]:[Ae,i===Se?null:J,J,I];continue}if(i===Se&&e&Wt){[j,T]=[c||e,null];continue}if(i===Lt&&e&(ye|Me)){[j,T,e]=[e,Xt,Ae];continue}if(i===Te&&e&In){[T,e]=[null,ge];continue}if(e&(ge|Me)){[j,T,e]=[e,ye,ye];continue}}while(!1);y=i,g===null&&(g=j),g&&g!==T&&(G[G.length]=[g,R.substring(F,F=Z)],(G.length===M||!C.length)&&(yield G,G=[])),g=T,L=Ne,B=Ie}f=R.substring(F,R.length)}!q&&f&&(G[G.length]=[g,f],yield G,G=[])}}Object.assign(pt,{Lexer:pt,stateInfo:Ln,typeName:dt,tokenTypes:ft,tokenRoles:On,typeMask:Gt,roleMask:jt});Mt.exports=pt});var mt=pe((zo,$t)=>{var $o=console.log.bind(console),{tokenTypes:H,tokenRoles:Y,roleMask:Qo,typeMask:Dn,typeName:Uo}=Ve();function ht(){let e=this,n,a,s,c,y,d,w,x=!0;return Object.defineProperty(this,"state",{get:R=>({output:n,stack:a})}),Object.assign(this,{reset:k,write:L,batchWrite:B,read:q,readAll:f,end:C}),k();function k(){return n=[],a=[],s=null,c=!1,y=null,d=null,e}function*q(){return yield*n,n=[],e}function f(){let R=n;return n=[],R}function C(){for(;a.length;){let R=a.shift();a.length?a[0].content.push(R):n[n.length]=R}return e}function L(R){return B([R])}function B(R){for(let F of R){let[g,A]=F,P=g&Dn;switch(g){case H.StartTag|Y.Start:s=[Y.Start,A.substr(1)],c=!1;break;case H.EndTag|Y.Start:s=[Y.End,A.substr(2)];break;case H.Bogus|Y.Start:case H.Comment|Y.Start:n[n.length]=[g,"#comment"];break;case H.Bogus|Y.End:case H.Comment|Y.End:n[n.length]=[g,"#comment"];break;case H.StartTag|Y.End:s.attributes=s[2]=y,s.end=A,c&&(s.selfclose=!0,s.end="/>"),n[n.length]=s;break;case H.EndTag|Y.End:s.end=A,n[n.length]=s;break;case H.BeforeAtt:c=A[A.length-1]==="/";break;case H.AfterAttName:case H.Assign:case H.BeforeValue:c=!1;break;case H.AttName:y=y||Object.create(null),A in y?d=null:(d=A,y[A]="");break;case H.Value:d!=null&&(y[d]+=A);break;case H.NamedRef:case H.NumRef:case H.HexRef:s?d!=null&&(y[d]+=A):n[n.length]=[g,A];break;default:!(g&(Y.Start|Y.End))&&A.length&&(n[n.length]=[g,A],c=!1)}}return e}}ht.TokenBuilder=ht;$t.exports=ht});var kt=pe((Yo,Qt)=>{var Jo=console.log.bind(console),{E:t,C:l,Any:Ut,None:X,printKind:Hn}=Fe(),qn={},jn={name:"#document",content:t.html|l.COMMENT,openFor:~l.SPACE,paths:{"#default":"html"},siblingRules:!0},Xn={name:"#fragment",escalate:X,content:l.bodyContent},Gn={content:t.html|l.COMMENT,openFor:~l.SPACE,paths:{"#default":"html"},siblingRules:!0},zt={content:t.head|l.COMMENT,openFor:~l.SPACE,paths:{"#default":"head"},siblingRules:!0},Kn={allowEnd:X,escalate:~(t.frame|t.head),content:l.meta|l.SPACE|l.COMMENT},Wn={escalate:X,content:t.body|t.frameset|l.COMMENT,openFor:~(l.metaRedirect|t.frame|t.frameset|l.SPACE|l.DATA),paths:{"#default":"body"},redirect:l.metaRedirect|l.DATA,reparent:l.SPACE,siblingRules:!0},Vn={escalate:X,content:l.bodyContent},ae={content:l.SPACE|l.DATA,escalate:Ut},$n={content:l.COMMENT,_reopen:~l.COMMENT},Qn={escalate:X,content:l.COMMENT,_reopen:~l.COMMENT},Un={escalate:X,content:t.frameset|t.frame|t.noframes|l.SPACE|l.COMMENT},zn={content:t.noframes|l.SPACE|l.COMMENT},Jn={content:l.COMMENT,redirect:t.noframes|l.SPACE|l.DATA},Yn={allowEnd:X,escalate:t.table,content:l.tableContent,openFor:t.col|t.tr|l.cell,paths:{col:"colgroup",tr:"tbody",td:"tbody",th:"tbody"},reparent:l.fosterParented},Zn={allowEnd:t.table,content:l.bodyContent},eo={allowEnd:t.table,content:t.col|l.hiddenInput|t.template|l.SPACE,escalate:Ut,reparent:X},bt={allowEnd:t.table,escalate:l.tableIsh&~(t.tr|l.cell),openFor:l.cell,paths:{td:"tr",th:"tr"},content:l.tbodyContent,reparent:l.fosterParented},to={allowEnd:t.table|l.tbody,escalate:l.tableIsh&~l.cell,content:l.trContent,reparent:l.fosterParented},Jt={allowEnd:t.table|t.tr|l.tbody,escalate:l.tableIsh,content:l.bodyContent},Yt={allowEnd:X,escalate:l.closeSelect,content:t.option|t.optgroup|t.script|t.template|l.TEXT|l.SPACE},no={content:t.option|t.script|t.template|l.TEXT|l.SPACE},Zt=l.tableIsh&~(t.colgroup|t.col),oo={allowEnd:l.tableIsh,escalate:l.closeSelect|Zt,content:t.option|t.optgroup|t.script|t.template|l.TEXT|l.SPACE},gt={allowEnd:l.tableIsh,escalate:l.tableIsh,content:l.bodyContent},lo={escalate:X,content:l.bodyContent&~t.form},ro={content:l.bodyContent},ao={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body|t.form),content:l.bodyContent},en={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body|t.form|t.li),content:l.bodyContent},so={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body|t.form|t.p),content:l.bodyContent&~t.button},io={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body|t.form),content:l.bodyContent&~l.h1_h6},tn={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body),content:l.bodyContent&~t.li},$e={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body),content:l.bodyContent&~l.dddt},yt={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math|t.body),content:l.pContent},co={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math),content:yt.content&~t.button},uo={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math),content:tn.content&~t.button},fo={allowEnd:~(t.option|t.optgroup|l.other|t.svg|t.math),content:$e.content&~t.button},po={allowEnd:~(t.svg|t.math|t.body),forbid:t.option|t.optgroup,escalate:~l.h1_h6,allow:l.h1_h6},ho={content:yt.content&~(t.option|t.optgroup)},mo={content:t.script|t.template|l.TEXT|l.SPACE,escalate:l.closeSelect|l.tableIsh|t.option|t.optgroup},Qe={allowEnd:~(t.svg|t.math|t.form|t.body),allow:l.h1_h6|t.option|t.optgroup,forbid:~l.bodyContent},ve={namespace:t.svg,allowEnd:~(t.html|t.body),escalate:l.breakout,content:~l.breakout},bo={namespace:t.svg,allowEnd:~(t.html|t.body),escalate:l.breakout,content:~l.breakout},Ue={namespace:t.math,allowEnd:~(t.html|t.body),escalate:l.breakout|Zt,content:~l.breakout},de={namespace:X,allowEnd:t.svg|t.math,escalate:X,content:l.bodyContent},nn={namespace:X,allowEnd:t.svg|t.math|l.tableIsh,escalate:l.tableIsh,content:l.bodyContent},on={html:zt,head:Kn,body:Vn,frameset:Un,template:{allowEnd:X,content:~(t.body|t.frameset|t.frame)},applet:gt,object:gt,marquee:gt,svg:ve,math:Ue,select:Yt,dl:ao,ol:en,ul:en,dd:$e,dt:$e,button:so,form:lo,div:Qe,address:Qe,style:ae,script:ae,xmp:ae,iframe:ae,noembed:ae,noframes:ae,textarea:ae,title:ae,plaintext:ae,"#comment":ae,table:Yn,caption:Zn,colgroup:eo,thead:bt,tbody:bt,tfoot:bt,tr:to,th:Jt,td:Jt},go={svg:ve,math:Ue,foreignObject:de},yo={svg:ve,math:Ue,mi:de,mo:de,mn:de,ms:de,mtext:de};function ko(e){let n=Object.assign({},e);for(let a in n)typeof n[a]=="bigint"&&(n[a]=Hn(n[a]));return n}function Eo({namespace:e,closable:n},a,s){return e&t.math?s&l.annotationHtml?n&t.table?nn:de:yo[a]||Ue:e&t.svg?a==="desc"?n&t.table?nn:de:go[a]||ve:s&t.p?n&t.button?co:yt:s&t.li?n&t.button?uo:tn:s&l.dddt?n&t.button?fo:$e:s&t.svg?n&t.table?bo:ve:s&t.select?n&t.table?oo:Yt:s&t.option?n&t.select?mo:n&t.p?ho:po:s&t.optgroup?n&t.select?no:Qe:s&l.h1_h6?io:a in on?on[a]:s&l._specialBlock?ro:n&t.p?qn:Qe}function To({kind:e,children:n},a,s,c){return e===X?n&t.html?c&t.frameset?Jn:Qn:Gn:e&t.html?n&t.frameset?zn:n&t.body?$n:n&t.head?Wn:zt:null}var Co={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"};Qt.exports={SVGTagNameAdjustments:Co,documentRule:jn,fragmentRule:Xn,childRule:Eo,siblingRule:To,ruleInfo:ko}});var un=pe((sl,ln)=>{var{defineProperty:rn,assign:Zo,setPrototypeOf:el}=Object,_o=(e,n)=>{for(let a in n)rn(e,a,{value:n[a],enumerable:!1,configurable:!0})},Ao=(e,n)=>{for(let a in n)rn(e,a,{get:n[a],enumerable:!1,configurable:!0})},tl=console.log.bind(console),{Lexer:wo,tokenTypes:te,tokenRoles:an,typeName:nl,typeMask:ol,roleMask:xo}=Ve(),{TokenBuilder:Ro}=mt(),{E:h,C:O,Any:ll,None:ze,kinds:So,otherKind:Mo,printKind:rl}=Fe(),{documentRule:Et,childRule:Po,siblingRule:sn,ruleInfo:vo,SVGTagNameAdjustments:Oo}=kt(),{TreeBuilder:No,Node:Je,Leaf:cn}=lt(),Tt=No({childRule:Po,siblingRule:sn,ruleInfo:vo}),{Start:ne,End:U,Leaf:Oe}=an,al=ne|U|Oe;function Ct({context:e=Et,verbose:n=!1}={}){let a=new wo,s=new Ro,c=new Tt({context:e,verbose:n,documentRule:Et}),y,d,w,x,k;Ao(this,{document:()=>c.document}),_o(this,{reset:C,write:L,end:B});let q=h.html|h.head|h.body|h.frameset|h.table;c._onopen(q,(g,A,P,_,E)=>{switch(A){case h.html:return y=P;case h.body:return x=E,w=P;case h.head:{d=P;let m=c.tip;c.stack[1].redirectTo=new Tt({context:m,node:m.node,verbose:n}),c.stack[1].fosterParent=y;return}case h.frameset:{let m=c.stack[1];m=m.applyRule(sn(m,g,A,c.allOpened|h.frameset));let N=new Tt({context:m,verbose:n});return c.stack[0].redirectTo=N,N.tip.node=c.stack[1].node,w=P}case h.table:{let m=new Je("#reparented",ze);c.tip.fosterParent=m;let N=_.children,W=N.pop();return N.push(m,W)}}});let f=this;return C();function C(){return a.reset(),s.reset(),c.reset(),k=c.tip,y=d=w=null,f}function L(g){for(let A of a.write(g).batchRead(32))s.batchWrite(A),F(s.readAll())}function B(){for(let g of a.end().batchRead(32))s.batchWrite(g),F(s.readAll());return c.tryClose(null,O.COMMENT),e===Et&&(y||c.tryOpen("html",h.html),d||c.tryOpen("head",h.head)||y.children.push(new Je("head")),w||c.tryOpen("body",h.body)||y.children.push(new Je("body"))),f}function*R(g){let A=g.length;for(let P=0;P<A;P++){let[_,E,m]=g[P];k=c.tip;let{namespace:N,closable:W}=k;if(_&(te.Comment|te.Bogus)?kind=O.COMMENT:_&(te.RcData|te.RawText|te.PlainText)&&(kind=O.DATA),_&xo&&(E=E.toLowerCase(),N&h.svg&&(E=Oo[E]||E),kind=So[E]||Mo),_&ne){switch(_=ne,kind&O.startTagExceptions){case h.select:W&h.select&&(_=U);break;case h.head:case h.body:N&&(yield[U,null,N]);break;case h.image:E="img",kind=h.img;break;case h.input:m&&"type"in m&&m.type.toLowerCase()==="hidden"&&(kind=O.hiddenInput);break;case h.font:{let M={color:1,face:1,size:1};for(let G in m)G.toLowerCase()in M&&(kind=O.htmlFont);break}case h.a:W&h.a&&(yield[U,E,kind]),yield[ne,E,kind,m];continue;case h.nobr:W&h.nobr&&(yield[U,E,kind]),yield[ne,E,kind,m];continue;case O.annotationXml:if(m&&"encoding"in m&&N&h.math){let M=m.encoding.toLowerCase();(M==="text/html"||M==="application/xhtml+xml")&&(kind=O.annotationHtml)}}g[P].selfclose&&N&(h.svg|h.math)?(yield[ne,E,kind,m],yield[U,E,kind]):yield kind&O.void?[Oe,new cn(E,m),kind]:[_,E,kind,m];continue}if(_&U){_=U,kind&O.endTagExceptions?kind&h.br?yield[ne,E,kind]:kind&h.body?(c.allClosed&h.head||(yield[ne,E,kind,m]),yield[U,E,kind]):kind&O.h1_h6&&W&O.h1_h6||kind&O.annotationXml?yield[U,null,kind]:kind&h.p&&w&&!(W&h.p)||kind&h.head&&!d?(yield[ne,E,kind],yield[U,E,kind]):yield[_,E,kind]:yield[_,E,kind];continue}let oe=_&(te.RawText|te.RcData|te.PlainText|te.Comment|te.Bogus)?O.DATA:_&an.Space?O.SPACE:O.TEXT;k.closable&h.table&&P<A-1&&g[P+1][0]&te.Data?yield[Oe,E,O.TEXT]:yield[Oe,E,oe]}return f}function F(g){for(let[A,P,_,E]of R(g)){let m=c;if(k.redirect&_?m=c.tip.redirectTo||m:k._reopen&_&&(k.kind===ze&&!(c.allOpened&h.frameset)?(c._select("html",h.html),c._select("body",h.body),k=c.tip):k.kind&h.html&&(c._select("body",h.body),k=c.tip)),A===ne){if(_&h.frameset&&(c.allOpened&~O.framesetOK)===h.body){m._open(P,_,E),y.children[x]=m.tip.node;continue}_&O.reformat&&m._reformat(),m.tryOpen(P,_,E,_&O.breakout?ze:m.tip.namespace),a.setNamespace(m.tip.namespace)}else if(A===U){let N=m.tryClose(P,_);a.setNamespace(m.tip.namespace)}else _&O.reformat&&m._reformat(),m.tryAppend(P,_,E,_&O.breakout?ze:m.tip.namespace)}return f}}Object.assign(Ct,{Node:Je,Leaf:cn,START:ne,END:U,LEAF:Oe,Director:Ct,_private:{C:O,E:h}});ln.exports=Ct});var hn=pe((ul,fn)=>{var{assign:il,defineProperty:dn}=Object,cl=console.log.bind(console),se={TreeBuilder:lt(),Director:un(),Lexer:Ve(),TokenBuilder:mt(),schema:kt()};function*Io(e,n){let a=new se.TokenBuilder,s=n.write(e).end().read();for(let c of s)yield*a.write(c).readAll();yield*a.end().readAll()}function Bo(e){let n=new se.Lexer,a=Io(e,n);return dn(a,"state",{get:s=>n.state})}function Fo(e){let n=new se.Lexer,a=n.write(e).end().read();return dn(a,"state",{get:s=>n.state})}function pn(e){let n=new se.Director(e);this.parse=function(s){return n.reset(),n.write(s),n.end(),n.document}}se.parse=e=>new pn().parse(e);se.tokens=Bo;se.Parser=pn;se.chunks=Fo;se.version="0.9.0-dev";fn.exports=se});globalThis.modules=globalThis.modules||{};globalThis.modules.html=hn();})();
